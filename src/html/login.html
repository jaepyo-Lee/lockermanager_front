<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>지능기전공학과 사물함 예약</title>
    <link rel="stylesheet" type="text/css" href="../css/login.css">
    <script   src="https://code.jquery.com/jquery-3.6.0.min.js"   integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="   crossorigin="anonymous"></script>
    </script>

    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .heading {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .login-wrapper {
            margin-top: -50px; /* Adjust this value to move the login section up */
        }
    </style>
</head>
<body>
<div class="heading"><h1>지능기전공학과 사물함 예약</h1></div>
<div class="container">
    <div class="login-wrapper">
        <h2>Login</h2>
        <form id="login-form">
            <input type="text" name="studentNum" placeholder="학번을 입력해주세요">
            <input type="password" name="password" placeholder="비밀번호를 입력해주세요">
            <input type="submit" value="Login">
        </form>
    </div>
</div>

<script>
    $(document).ready(function() {
        // 로그인 폼 제출을 처리하는 함수
        $("#login-form").submit(function(e) {
            e.preventDefault(); // 기본 제출 동작 방지

            // 폼 데이터 가져오기
            var formData = {
                id: $("input[name=studentNum]").val(),
                pw: $("input[name=password]").val()
            };

            // 서버로 POST 요청 보내기
            $.ajax({
                type: "POST",
                url: "http://54.180.70.111:8080/api/auth/login", // 실제 서버 URL로 대체해야 합니다
                data: formData,
                success: function(response) {
                    if (response.status==200) {
                        var accesstoken = response.result.accessToken;
                        var refreshToken = response.result.refreshToken;
                        // 로그인 성공 시 처리
                        localStorage.setItem("accessToken", accesstoken);
                        localStorage.setItem("refreshToken", refreshToken);

                        // 원하는 화면으로 이동
                        window.location.replace("index.html");
                    } else {
                        // 로그인이 실패한 경우 에러 메시지를 표시
                        alert("로그인 정보를 확인해주세요");
                    }
                },
                error: function() {
                    // 서버 요청이 실패하면 실행되는 함수
                    // 로그인이 실패한 경우 에러 메시지를 표시할 수 있습니다
                    // 예를 들어, 경고 메시지 표시:
                    alert("로그인에 실패했습니다. 자격증명을 확인하고 다시 시도해주세요.");
                }
            });
        });
    });
</script>
</body>
</html>
